<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Crime Festival 2025 - Admin Management Panel">
    <title>Admin Panel - TEK Management</title>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc, getDocs, collection, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        const firebaseConfig = {
          apiKey: "AIzaSyA_9_40aa_wO_19g-1bIrSB6742aMOPwjo",
          authDomain: "crime-festival-2025.firebaseapp.com",
          projectId: "crime-festival-2025",
          storageBucket: "crime-festival-2025.firebasestorage.app",
          messagingSenderId: "663770004335",
          appId: "1:663770004335:web:e42dbd983ab9b5277bc69a"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.firebaseDB = db;
        window.firebaseDoc = doc;
        window.firebaseSetDoc = setDoc;
        window.firebaseGetDoc = getDoc;
        window.firebaseGetDocs = getDocs;
        window.firebaseCollection = collection;
        window.firebaseDeleteDoc = deleteDoc;
        window.firebaseOnSnapshot = onSnapshot;
        console.log("âœ… Firebase connected!");
    </script>

    <link rel="stylesheet" href="../../css/admin/admin.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”’ CRIME MANAGEMENT</h1>
            <p>ADMIN PANEL</p>
        </div>
    
		<div class="section">
			<h2>â• Î Î¡ÎŸÎ£Î˜Î—ÎšÎ— ÎŸÎœÎ‘Î”Î‘Î£</h2>
			<div class="team-input">
				<input type="text" id="newTeamName" placeholder="ÎŸÎÎŸÎœÎ‘" />
				<input type="text" id="newTeamPassword" placeholder="ÎšÎ©Î”Î™ÎšÎŸÎ£" />
				<input type="number" id="newTeamSize" placeholder="ÎœÎ•Î›Î— (1-10)" min="1" max="10" />
				<button class="btn btn-primary" onclick="addTeam()">Î Î¡ÎŸÎ£Î˜Î—ÎšÎ— ÎŸÎœÎ‘Î”Î‘Î£</button>
			</div>

			<div style="margin-top: 15px; padding: 12px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
				<label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 14px;">
					<input type="checkbox" id="testingModeCheckbox" style="width: 20px; height: 20px; cursor: pointer;">
					<span style="font-weight: bold; color: #0d47a1;">ğŸ§ª Î›Î•Î™Î¤ÎŸÎ¥Î¡Î“Î™Î‘ Î”ÎŸÎšÎ™ÎœÎ©Î</span>
				</label>
			</div>
			
			<div id="addTeamAlert"></div>
		</div>

<div class="section">
    <h2>ğŸ“Š Î”Î™Î‘Î§Î•Î™Î¡Î—Î£Î—</h2>
    <div style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
        <label style="color: #000; font-weight: 700; margin-right: 10px;">Î›Î•Î™Î¤ÎŸÎ¥Î¡Î“Î™Î‘:</label>
        <select id="adminMode" onchange="toggleAdminMode()" style="padding: 8px 15px; border-radius: 5px; border: 2px solid #000; font-weight: 700;">
            <option value="live">ğŸ® LIVE EVENT</option>
            <option value="testing">ğŸ§ª TESTING MODE</option>
        </select>
    </div>

    <h3 style="color: #0f3460; margin-top: 0;">ğŸª EVENT OPERATIONS</h3>
    
    <!-- Row 1: Main Operations -->
    <div class="quick-actions">
        <button class="btn" style="background: #ffc107; color: #000;" onclick="window.location.href='leaderboard.html'">ğŸ† LEADERBOARD (ADMIN)</button>
        <button class="btn" id="leaderboardToggleBtn" style="background: #dc3545; color: white;" onclick="toggleLeaderboard()">ğŸ”’ LEADERBOARD (TEAMS)</button>
        <button class="btn" style="background: #9c27b0; color: white;" onclick="openAlertModal()">ğŸ“¢ Î‘Î ÎŸÎ£Î¤ÎŸÎ›Î— Î•Î™Î”ÎŸÎ ÎŸÎ™Î—Î£Î—Î£</button>
    </div>

    <!-- Row 2: Game Master Observations -->
    <div class="quick-actions" style="margin-top: 10px;">
        <button class="btn" style="background: #059669; color: white;" onclick="window.location.href='observation.html'">â• NEW OBSERVATION</button>
        <button class="btn" style="background: #2563eb; color: white;" onclick="window.location.href='observations-dashboard.html'">ğŸ‘€ VIEW OBSERVATIONS</button>
        <button class="btn" style="background: #7c3aed; color: white;" onclick="window.location.href='observations-analytics.html'">ğŸ“Š OBSERVATION ANALYTICS</button>
    </div>

    <!-- Rest of your sections remain the same -->
    <h3 style="color: #0f3460;">ğŸ’¾ DATA MANAGEMENT</h3>
    <div class="quick-actions">
        <button class="btn" style="background: #17a2b8; color: white;" onclick="exportAllData()">ğŸ’¾ EXPORT DATA (GAME)</button>
        <button class="btn" style="background: #6c757d; color: white;" onclick="importData()">ğŸ“¥ IMPORT DATA (GAME)</button>
        <button class="btn" style="background: #059669; color: white;" onclick="exportSurveyDataToExcel()">ğŸ“Š EXPORT SURVEYS (EXCEL)</button>
    </div>

	<h3 style="color: #0f3460;">ğŸ§ª TESTING TOOLS</h3>
	<div class="quick-actions">
		<button class="btn btn-secondary" onclick="unlockAllForAll()">ğŸ”“ ÎÎ•ÎšÎ›Î•Î™Î”Î©ÎœÎ‘ Î¤Î•ÎšÎœÎ—Î¡Î™Î©Î (ÎŸÎ›Î©Î)</button>
		<button class="btn" style="background: #17a2b8; color: white;" onclick="resetAllProgress()">ğŸ”„ RESET PROGRESS (ÎŸÎ›Î•Î£)</button>
		<button class="btn" style="background: #9c27b0; color: white;" onclick="setupTestEnvironment()">ğŸ² DEMO ENVIRONMENT</button>
	</div>

    <h3 style="color: #dc3545;">âš ï¸ DANGER ZONE</h3>
    <div class="quick-actions" style="border: 2px solid #dc3545; padding: 15px; border-radius: 8px; background: rgba(220, 53, 69, 0.05);">
        <button class="btn" style="background: #e91e63; color: white;" onclick="deleteAllAlerts()">ğŸ—‘ï¸ Î”Î™Î‘Î“Î¡Î‘Î¦Î— Î•Î™Î”ÎŸÎ ÎŸÎ™Î—Î£Î•Î©Î (ÎŸÎ›Î©Î)</button>
        <button class="btn" style="background: #b91c1c; color: white;" onclick="deleteALLSurveysNuclear()">ğŸ—‘ï¸ Î”Î™Î‘Î“Î¡Î‘Î¦Î— Î•Î¡Î©Î¤Î—ÎœÎ‘Î¤ÎŸÎ›ÎŸÎ“Î™Î©Î (ÎŸÎ›Î‘)</button>
        <button class="btn btn-danger" onclick="resetAll()">ğŸ—‘ï¸ Î”Î™Î‘Î“Î¡Î‘Î¦Î— ÎŸÎœÎ‘Î”Î©Î (ÎŸÎ›Î•Î£)</button>
    </div>
</div>

        <div class="section">
            <h2>ğŸ‘¥ ÎŸÎœÎ‘Î”Î•Î£</h2>
            
            <div class="sort-controls">
                <label>Î¤Î‘ÎÎ™ÎÎŸÎœÎ—Î£Î—:</label>
                <select id="sortOrder" onchange="refreshTeams()">
                    <option value="name">ÎŸÎÎŸÎœÎ‘</option>
                    <option value="progress">Î Î¡ÎŸÎŸÎ”ÎŸÎ£</option>
                    <option value="completion">Î§Î¡ÎŸÎÎŸÎ£ ÎŸÎ›ÎŸÎšÎ›Î—Î¡Î©Î£Î—Î£ (Î¤Î‘Î§Î¥Î¤Î•Î¡ÎŸ)</option>
                    <option value="recent">Î Î™ÎŸ Î Î¡ÎŸÎ£Î¦Î‘Î¤ÎŸ</option>
                </select>
            </div>
            
            <div id="teamsContainer" class="team-list"></div>
        </div>
    </div>

    <div id="timestampModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTeamName">Î§Î¡ÎŸÎÎ™ÎšÎ‘ Î£Î—ÎœÎ•Î™Î‘</h2>
                <span class="close-modal" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¢ Î‘Î ÎŸÎ£Î¤ÎŸÎ›Î— Î•Î™Î”ÎŸÎ ÎŸÎ™Î—Î£Î—Î£</h2>
                <span class="close-modal" onclick="closeAlertModal()">&times;</span>
            </div>
            <div style="padding: 20px 0;">
                <div class="form-group">
                    <label>Î•Î Î™Î›ÎŸÎ“Î— Î Î‘Î¡Î‘Î›Î—Î Î¤Î—:</label>
                    <select id="alertTarget">
                        <option value="all">ğŸ“¢ ÎŸÎ›Î•Î£ ÎŸÎ™ ÎŸÎœÎ‘Î”Î•Î£</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ÎœÎ—ÎÎ¥ÎœÎ‘:</label>
                    <textarea 
                        id="alertMessage" 
                    ></textarea>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="closeAlertModal()">âŒ Î‘ÎšÎ¥Î¡Î©Î£Î—</button>
                    <button class="btn" style="background: #9c27b0; color: white;" onclick="sendAlert()">ğŸ“¢ Î‘Î ÎŸÎ£Î¤ÎŸÎ›Î—</button>
                </div>
            </div>
        </div>
    </div>

    <div id="firebaseStatus">
        âœ… Firebase Connected - Data Synced to Cloud
    </div>

    <script src="../../js/admin/admin.js"></script>
</body>
</html>